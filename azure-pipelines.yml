
pool:
  vmImage: 'ubuntu-16.04'

stages:

- stage: Test
  jobs:
  - job: Linting
    container: 'python:3.7-slim-stretch'
    steps:
    - download: current
      artifact: VirtualEnv
    - script: |
        export PATH=$PATH:~/.local/bin
        pip3 install pipenv
        python3 -m venv venv
        source venv/bin/activate
        pipenv install --dev --deploy
        flake8 --version
        flake8 app

  - job: Mypy
    container: 'python:3.7-slim-stretch'
    steps:
    - download: current
      artifact: VirtualEnv
    - script: |
        export PATH=$PATH:~/.local/bin
        pip3 install pipenv
        python3 -m venv venv
        source venv/bin/activate
        pipenv install --dev --deploy
        mypy --version
        mypy app

